{%load static %}
<style>

 

.createpostcontainer{

display: none;
position: fixed;
width: 450px;
height: auto;
padding: 20px;
background-color: white;
box-shadow: 2px 2px 8px rgb(66, 66, 66);
top:  70px;
left: calc(50% - 250px);
z-index: 2;

border-radius: 8px;
}
#descriptionpost{
width: 100%;
height: 150px;

 resize: none;
 border: none;
 outline: none;

}

.submitpost{

    background-color: #1b74e4;
    border: none;
    border-radius: 12px;
    font-weight: 500;
    box-shadow: 2px 2px 5px rgb(186, 186, 186);
    color: white;
    width: 100%;
    padding: 7px;
    transition: 0.3s;
    
    
}
.submitpost:hover{
    
    transition: 0.3s;
    background-color: dodgerblue ;
   transform: scale(0.98);


}
#preview{
    display:none;
    width: 200px;
    height: 200px;
    margin-bottom: 10px;
    object-fit: cover;
}

#cancelpostpage{
    font-weight: bolder;
     border-radius: 50%; 
     padding:1px  5px;
      background-color: black;
       color: white;
        text-align: center;
        transition: 0.4s;
    }
    #cancelpostpage:hover{
        
        background-color: rgb(243, 0, 0);
        transition: 0.4sx;
      transform: scale(0.95);
      cursor: pointer;
}

@media  (max-width:500px) {
    .createpostcontainer{
        width: 95%;
left: 3%;
}

}

</style>

<form action="" method="post" enctype="multipart/form-data" >
    {% csrf_token %}

<div class="createpostcontainer">

    <div class="headerpost fbcr" style=" padding-bottom: 10px;  border-bottom: 2px solid rgb(224, 218, 218);">
           <h3 class="username" style="width: 88%;">Create post</h3>
        <div id="cancelpostpage"  >X</div>
    </div>
    <div class="userinfo fbcr" style="padding: 20px 0px;">
        <img src="{%static 'facebook-logo.png' %}" alt="" class="profilelogo" style="width: 30px; height: 30px;">
        <div class="username" style="width: 85%;">Nstudio</div>
        
    </div>
    <textarea name="desc" id="descriptionpost" cols="30" rows="10" placeholder="Write here.."></textarea>

    <div class="my-3">
        <label for="formFileSm" class="form-label" >upload Image/video</label>
        <div class="fbcr">
            <input class="form-control form-control-sm" id="formFileSm" name="img_vid" type="file" style="width: 90%;">
            <i class="fa fa-smile-o" aria-hidden="true" style="cursor: pointer; color: orange; font-size: 24px !important;"></i>
        </div>

    </div>
    <center>

        <img src="" alt="" id="preview"   >
    </center>
 
        <button  name="submit" id="submit" class="submitpost" value="POST">POST</button>
   
</div>

</form>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
 


<script>
    

    //  use ajax for send Request
    
    $('input[type="file"]').change(function(e) {
  var fileName = e.target.files[0].name;
 

  var reader = new FileReader();
  reader.onload = function(e) {
	// get loaded data and render thumbnail.
	document.getElementById("preview").src = e.target.result;
	document.getElementById("preview").style.display = "inherit";

  
  };

  // read the image file as a data URL.
  reader.readAsDataURL(this.files[0]);

});

 
    // $('#submit').click(function (e) { 
    //     data={
    //         "description":$('#descriptionpost').val()    , 
    //         "feeling":"happy",
    //         "img_vid":reader       
    //     }
      
    //     $.ajax({
             
    //         url: "{% url 'createpost' %}",
    //         method: "POST",
    //         data: data,
            
    //         success: function (data) {
    //              console.log(data)
    //              if(data.status=="Login"){
    //                 $(location).prop('href', '/login/')
    //              }
                 

    //             }
                


    //         })


    //     })
    
</script>  
